<extend name="Public:menu"/>
<block name="content">
    <div class="row">
        <div class="col-sm-8 col-md-8">
            <form id="course">
                <div class="form-group">
                    <label for="title">课程名</label>
                    <input type="text" class="form-control" id="title" name="title" placeholder="课程名不超过50字">
                    <span class="msg-box" id="titleMsg"></span>
                </div>
                <div class="form-group">
                    <label for="brief">课程简介</label>
                    <textarea class="form-control" id="brief" name="brief" placeholder="介绍下你的课程吧" high="300px"></textarea>
                </div>
            </form>
        </div>
        <script>
            $('#course').validator({
                fields: {
                    title: {
                        rule: "required; length(~50)",
                        msg: {
                            required: "课程名必填",
                        },
                        ok: "",
                        timely: 1,
                        target: "#titleMsg",
                    },
                },
                valid: function(form) {
                    $.ajax({
                        url: "__APP__/Home/Login/login",
                        type: "POST",
                        async: true,
                        data: $("#course").serialize(),
                        success: function (data) {
                            if (data['code'] == 1) {
                                toastr.success(data['msg'], 'OK');
                                setTimeout(function () {
                                    window.location.href = "__APP__/Home";
                                }, 2000);
                            } else {
                                toastr.error(data['msg'], 'ERROR');
                            }
                        }
                    });
                }
            });
        </script>
    </div>
</block>